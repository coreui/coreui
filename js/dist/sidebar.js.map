{"version":3,"file":"sidebar.js","sources":["../src/util/index.js","../src/sidebar.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nconst toType = obj => ({}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase())\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-target')\n\n  if (!selector || selector === '#') {\n    const hrefAttr = element.getAttribute('href')\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = parseFloat(transitionDuration)\n  const floatTransitionDelay = parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  const evt = document.createEvent('HTMLEvents')\n\n  evt.initEvent(TRANSITION_END, true, true)\n  element.dispatchEvent(evt)\n}\n\nconst isElement = obj => (obj[0] || obj).nodeType\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener() {\n    called = true\n    element.removeEventListener(TRANSITION_END, listener)\n  }\n\n  element.addEventListener(TRANSITION_END, listener)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(element)\n    }\n  }, emulatedDuration)\n}\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes)\n    .forEach(property => {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = value && isElement(value) ?\n        'element' :\n        toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new Error(\n          `${componentName.toUpperCase()}: ` +\n          `Option \"${property}\" provided type \"${valueType}\" ` +\n          `but expected type \"${expectedTypes}\".`)\n      }\n    })\n}\n\nconst makeArray = nodeList => {\n  if (!nodeList) {\n    return []\n  }\n\n  return [].slice.call(nodeList)\n}\n\nconst isVisible = element => {\n  if (!element) {\n    return false\n  }\n\n  if (element.style && element.parentNode && element.parentNode.style) {\n    const elementStyle = getComputedStyle(element)\n    const parentNodeStyle = getComputedStyle(element.parentNode)\n\n    return elementStyle.display !== 'none' &&\n      parentNodeStyle.display !== 'none' &&\n      elementStyle.visibility !== 'hidden'\n  }\n\n  return false\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => function () {}\n\nconst reflow = element => element.offsetHeight\n\nconst getjQuery = () => {\n  const { jQuery } = window\n\n  if (jQuery && !document.body.hasAttribute('data-no-jquery')) {\n    return jQuery\n  }\n\n  return null\n}\n\nexport {\n  getjQuery,\n  TRANSITION_END,\n  getUID,\n  getSelectorFromElement,\n  getElementFromSelector,\n  getTransitionDurationFromElement,\n  triggerTransitionEnd,\n  isElement,\n  emulateTransitionEnd,\n  typeCheckConfig,\n  makeArray,\n  isVisible,\n  findShadowRoot,\n  noop,\n  reflow\n}\n","/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.0.0): sidebar.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  getjQuery,\n  reflow,\n  TRANSITION_END,\n  typeCheckConfig\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport PerfectScrollbar from 'perfect-scrollbar'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'sidebar'\nconst VERSION = '3.0.0'\nconst DATA_KEY = 'coreui.sidebar'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  breakpoints: {\n    xs: 'c-sidebar-show',\n    sm: 'c-sidebar-sm-show',\n    md: 'c-sidebar-md-show',\n    lg: 'c-sidebar-lg-show',\n    xl: 'c-sidebar-xl-show'\n  },\n  dropdownAccordion: true\n}\n\nconst DefaultType = {\n  breakpoints: 'object',\n  dropdownAccordion: '(string|boolean)'\n}\n\nconst ClassName = {\n  ACTIVE: 'c-active',\n  BACKDROP: 'c-sidebar-backdrop',\n  FADE: 'c-fade',\n  NAV_DROPDOWN: 'c-sidebar-nav-dropdown',\n  NAV_DROPDOWN_TOGGLE: 'c-sidebar-nav-dropdown-toggle',\n  SHOW: 'c-show',\n  SIDEBAR_MINIMIZED: 'c-sidebar-minimized',\n  SIDEBAR_OVERLAID: 'c-sidebar-overlaid',\n  SIDEBAR_SHOW: 'c-sidebar-show',\n  SIDEBAR_UNFOLDABLE: 'c-sidebar-unfoldable'\n}\n\nconst Event = {\n  CLASS_TOGGLE: 'classtoggle',\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n  CLOSE: `close${EVENT_KEY}`,\n  CLOSED: `closed${EVENT_KEY}`,\n  LOAD_DATA_API: `load${EVENT_KEY}${DATA_API_KEY}`,\n  OPEN: `open${EVENT_KEY}`,\n  OPENED: `opened${EVENT_KEY}`\n}\n\nconst Selector = {\n  NAV_DROPDOWN_TOGGLE: '.c-sidebar-nav-dropdown-toggle',\n  NAV_DROPDOWN: '.c-sidebar-nav-dropdown',\n  NAV_LINK: '.c-sidebar-nav-link',\n  NAVIGATION_CONTAINER: '.c-sidebar-nav',\n  NAVIGATION_DROPDOWN_ITEMS: '.c-sidebar-nav-dropdown-items',\n  SIDEBAR: '.c-sidebar'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Sidebar {\n  constructor(element, config) {\n    if (typeof PerfectScrollbar === 'undefined') {\n      throw new TypeError('CoreUI\\'s sidebar require Perfect Scrollbar')\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n    this._open = this._isVisible()\n    this._mobile = this._isMobile()\n    this._overlaid = this._isOverlaid()\n    this._minimize = this._isMinimized()\n    this._unfoldable = this._isUnfoldable()\n    this._setActiveLink()\n    this._ps = null\n    this._backdrop = null\n    this._psInit()\n    this._addEventListeners()\n\n    Data.setData(element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // Public\n\n  open(breakpoint) {\n    EventHandler.trigger(this._element, Event.OPEN)\n\n    if (this._isMobile()) {\n      this._addClassName(this._firstBreakpointClassName())\n      this._showBackdrop()\n      EventHandler.one(this._element, TRANSITION_END, () => {\n        this._addClickOutListener()\n      })\n    } else if (breakpoint) {\n      this._addClassName(this._getBreakpointClassName(breakpoint))\n    } else {\n      this._addClassName(this._firstBreakpointClassName())\n    }\n\n    const complete = () => {\n      if (this._isVisible() === true) {\n        this._open = true\n        EventHandler.trigger(this._element, Event.OPENED)\n      }\n    }\n\n    EventHandler.one(this._element, TRANSITION_END, complete)\n  }\n\n  close(breakpoint) {\n    EventHandler.trigger(this._element, Event.CLOSE)\n\n    if (this._isMobile()) {\n      this._element.classList.remove(this._firstBreakpointClassName())\n      this._removeBackdrop()\n      this._removeClickOutListener()\n    } else if (breakpoint) {\n      this._element.classList.remove(this._getBreakpointClassName(breakpoint))\n    } else {\n      this._element.classList.remove(this._firstBreakpointClassName())\n    }\n\n    const complete = () => {\n      if (this._isVisible() === false) {\n        this._open = false\n        EventHandler.trigger(this._element, Event.CLOSED)\n      }\n    }\n\n    EventHandler.one(this._element, TRANSITION_END, complete)\n  }\n\n  toggle(breakpoint) {\n    if (this._open) {\n      this.close(breakpoint)\n    } else {\n      this.open(breakpoint)\n    }\n  }\n\n  minimize() {\n    if (!this._isMobile()) {\n      this._addClassName(ClassName.SIDEBAR_MINIMIZED)\n      this._minimize = true\n      this._psDestroy()\n    }\n  }\n\n  unfoldable() {\n    if (!this._isMobile()) {\n      this._addClassName(ClassName.SIDEBAR_UNFOLDABLE)\n      this._unfoldable = true\n    }\n  }\n\n  reset() {\n    if (this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)) {\n      this._element.classList.remove(ClassName.SIDEBAR_MINIMIZED)\n      this._minimize = false\n      EventHandler.one(this._element, TRANSITION_END, this._psInit())\n    }\n\n    if (this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)) {\n      this._element.classList.remove(ClassName.SIDEBAR_UNFOLDABLE)\n      this._unfoldable = false\n    }\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...config\n    }\n\n    typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _isMobile() {\n    return Boolean(window.getComputedStyle(this._element, null).getPropertyValue('--is-mobile'))\n  }\n\n  _isMinimized() {\n    return this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)\n  }\n\n  _isOverlaid() {\n    return this._element.classList.contains(ClassName.SIDEBAR_OVERLAID)\n  }\n\n  _isUnfoldable() {\n    return this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)\n  }\n\n  _isVisible() {\n    const rect = this._element.getBoundingClientRect()\n\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /* or $(window).height() */\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth) /* or $(window).width() */\n    )\n  }\n\n  _addClassName(className) {\n    this._element.classList.add(className)\n  }\n\n  _firstBreakpointClassName() {\n    return Object.keys(Default.breakpoints).map(key => Default.breakpoints[key])[0]\n  }\n\n  _getBreakpointClassName(breakpoint) {\n    return Default.breakpoints[breakpoint]\n  }\n\n  _removeBackdrop() {\n    if (this._backdrop) {\n      this._backdrop.parentNode.removeChild(this._backdrop)\n      this._backdrop = null\n    }\n  }\n\n  _showBackdrop() {\n    if (!this._backdrop) {\n      this._backdrop = document.createElement('div')\n      this._backdrop.className = ClassName.BACKDROP\n      this._backdrop.classList.add(ClassName.FADE)\n      document.body.appendChild(this._backdrop)\n      reflow(this._backdrop)\n      this._backdrop.classList.add(ClassName.SHOW)\n    }\n  }\n\n  _clickOutListener(event, sidebar) {\n    if (event.target.closest(Selector.SIDEBAR) === null) { // or use:\n      event.preventDefault()\n      event.stopPropagation()\n      sidebar.close()\n    }\n  }\n\n  _addClickOutListener() {\n    EventHandler.on(document, Event.CLICK_DATA_API, event => {\n      this._clickOutListener(event, this)\n    })\n  }\n\n  _removeClickOutListener() {\n    EventHandler.off(document, Event.CLICK_DATA_API)\n  }\n\n  // Sidebar navigation\n\n  _getAllSiblings(element, filter) {\n    const siblings = []\n    element = element.parentNode.firstChild\n    do {\n      if (element.nodeType === 3) {\n        continue // text node\n      }\n\n      if (!filter || filter(element)) {\n        siblings.push(element)\n      }\n\n    // eslint-disable-next-line no-cond-assign\n    } while (element = element.nextSibling)\n\n    return siblings\n  }\n\n  _toggleDropdown(event, sidebar) {\n    let toggler = event.target\n    if (!toggler.classList.contains(ClassName.NAV_DROPDOWN_TOGGLE)) {\n      toggler = toggler.closest(Selector.NAV_DROPDOWN_TOGGLE)\n    }\n\n    const dataAttributes = toggler.closest(Selector.NAVIGATION_CONTAINER).dataset\n\n    if (typeof dataAttributes.dropdownAccordion !== 'undefined') {\n      Default.dropdownAccordion = JSON.parse(dataAttributes.dropdownAccordion)\n    }\n\n    // TODO: find better solution\n    if (Default.dropdownAccordion === true) {\n      this._getAllSiblings(toggler.parentElement).forEach(element => {\n        if (element !== toggler.parentNode) {\n          if (element.classList.contains(ClassName.NAV_DROPDOWN)) {\n            element.classList.remove(ClassName.SHOW)\n          }\n        }\n      })\n    }\n\n    toggler.parentNode.classList.toggle(ClassName.SHOW)\n    // TODO: Set the toggler's position near to cursor after the click.\n\n    // TODO: add transition end\n    sidebar._psUpdate()\n  }\n\n  // PerfectScrollbar\n\n  _psInit() {\n    if (this._element.querySelector(Selector.NAVIGATION_CONTAINER)) {\n      this._ps = new PerfectScrollbar(this._element.querySelector(Selector.NAVIGATION_CONTAINER), {\n        suppressScrollX: true\n      })\n    }\n  }\n\n  _psUpdate() {\n    if (this._ps) {\n      this._ps.update()\n    }\n  }\n\n  _psDestroy() {\n    if (this._ps) {\n      this._ps.destroy()\n      this._ps = null\n    }\n  }\n\n  _getParents(element, selector) {\n    // Setup parents array\n    const parents = []\n\n    // Get matching parent elements\n    for (; element && element !== document; element = element.parentNode) {\n      // Add matching parents to array\n      if (selector) {\n        if (element.matches(selector)) {\n          parents.push(element)\n        }\n      } else {\n        parents.push(element)\n      }\n    }\n\n    return parents\n  }\n\n  _setActiveLink() {\n    // eslint-disable-next-line unicorn/prefer-spread\n    Array.from(this._element.querySelectorAll(Selector.NAV_LINK)).forEach(element => {\n      let currentUrl\n\n      const urlHasParams = /\\\\?.*=/\n      const urlHasQueryString = /\\\\?./\n      const urlHasHash = /#./\n\n      if (urlHasParams.test(String(window.location)) || urlHasQueryString.test(String(window.location))) {\n        currentUrl = String(window.location).split('?')[0]\n      } else if (urlHasHash.test(String(window.location))) {\n        currentUrl = String(window.location).split('#')[0]\n      } else {\n        currentUrl = String(window.location)\n      }\n\n      if (currentUrl.slice(- 1) === '#') {\n        currentUrl = currentUrl.slice(0, -1)\n      }\n\n      if (element.href === currentUrl) {\n        element.classList.add(ClassName.ACTIVE)\n        // eslint-disable-next-line unicorn/prefer-spread\n        Array.from(this._getParents(element, Selector.NAV_DROPDOWN)).forEach(element => {\n          element.classList.add(ClassName.SHOW)\n        })\n      }\n    })\n  }\n\n  _addEventListeners() {\n    if (this._mobile && this._open) {\n      this._addClickOutListener()\n    }\n\n    if (this._overlaid && this._open) {\n      this._addClickOutListener()\n    }\n\n    EventHandler.on(this._element, Event.CLASS_TOGGLE, event => {\n      if (event.detail.className === ClassName.SIDEBAR_MINIMIZED) {\n        if (this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)) {\n          this.minimize()\n        } else {\n          this.reset()\n        }\n      }\n\n      if (event.detail.className === ClassName.SIDEBAR_UNFOLDABLE) {\n        if (this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)) {\n          this.unfoldable()\n        } else {\n          this.reset()\n        }\n      }\n\n      if (typeof Object.keys(Default.breakpoints).find(key => Default.breakpoints[key] === event.detail.className) !== 'undefined') {\n        const { className } = event.detail\n        const breakpoint = Object.keys(Default.breakpoints).find(key => Default.breakpoints[key] === className)\n\n        if (event.detail.add) {\n          this.open(breakpoint)\n        } else {\n          this.close(breakpoint)\n        }\n      }\n    })\n\n    EventHandler.on(this._element, Event.CLICK_DATA_API, Selector.NAV_DROPDOWN_TOGGLE, event => {\n      event.preventDefault()\n      this._toggleDropdown(event, this)\n    })\n\n    EventHandler.on(this._element, Event.CLICK_DATA_API, Selector.NAV_LINK, () => {\n      if (this._isMobile()) {\n        this.close()\n      }\n    })\n  }\n\n  // Static\n\n  static _sidebarInterface(element, config) {\n    let data = Data.getData(element, DATA_KEY)\n    const _config = typeof config === 'object' && config\n\n    if (!data) {\n      data = new Sidebar(element, _config)\n    }\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      Sidebar._sidebarInterface(this, config)\n    })\n  }\n\n  static getInstance(element) {\n    return Data.getData(element, DATA_KEY)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(window, Event.LOAD_DATA_API, () => {\n  // eslint-disable-next-line unicorn/prefer-spread\n  Array.from(document.querySelectorAll(Selector.SIDEBAR)).forEach(element => {\n    Sidebar._sidebarInterface(element)\n  })\n})\n\nconst $ = getjQuery()\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\nif ($) {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME] = Sidebar.jQueryInterface\n  $.fn[NAME].Constructor = Sidebar\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Sidebar.jQueryInterface\n  }\n}\n\nexport default Sidebar\n"],"names":["TRANSITION_END","toType","obj","toString","call","match","toLowerCase","isElement","nodeType","typeCheckConfig","componentName","config","configTypes","Object","keys","forEach","property","expectedTypes","value","valueType","RegExp","test","Error","toUpperCase","reflow","element","offsetHeight","getjQuery","window","jQuery","document","body","hasAttribute","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","breakpoints","xs","sm","md","lg","xl","dropdownAccordion","DefaultType","ClassName","ACTIVE","BACKDROP","FADE","NAV_DROPDOWN","NAV_DROPDOWN_TOGGLE","SHOW","SIDEBAR_MINIMIZED","SIDEBAR_OVERLAID","SIDEBAR_SHOW","SIDEBAR_UNFOLDABLE","Event","CLASS_TOGGLE","CLICK_DATA_API","CLOSE","CLOSED","LOAD_DATA_API","OPEN","OPENED","Selector","NAV_LINK","NAVIGATION_CONTAINER","NAVIGATION_DROPDOWN_ITEMS","SIDEBAR","Sidebar","PerfectScrollbar","TypeError","_element","_config","_getConfig","_open","_isVisible","_mobile","_isMobile","_overlaid","_isOverlaid","_minimize","_isMinimized","_unfoldable","_isUnfoldable","_setActiveLink","_ps","_backdrop","_psInit","_addEventListeners","Data","setData","open","breakpoint","EventHandler","trigger","_addClassName","_firstBreakpointClassName","_showBackdrop","one","_addClickOutListener","_getBreakpointClassName","complete","close","classList","remove","_removeBackdrop","_removeClickOutListener","toggle","minimize","_psDestroy","unfoldable","reset","contains","constructor","Manipulator","getDataAttributes","Boolean","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","className","add","map","key","parentNode","removeChild","createElement","appendChild","_clickOutListener","event","sidebar","target","closest","preventDefault","stopPropagation","on","off","_getAllSiblings","filter","siblings","firstChild","push","nextSibling","_toggleDropdown","toggler","dataAttributes","dataset","JSON","parse","parentElement","_psUpdate","querySelector","suppressScrollX","update","destroy","_getParents","selector","parents","matches","Array","from","querySelectorAll","currentUrl","urlHasParams","urlHasQueryString","urlHasHash","String","location","split","slice","href","detail","find","_sidebarInterface","data","getData","jQueryInterface","each","getInstance","$","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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"}