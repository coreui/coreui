{"version":3,"file":"class-toggler.js","sources":["../src/util/index.js","../src/class-toggler.js"],"sourcesContent":["/**\r\n * --------------------------------------------------------------------------\r\n * Bootstrap (v5.0.0-alpha1): util/index.js\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\nconst MAX_UID = 1000000\r\nconst MILLISECONDS_MULTIPLIER = 1000\r\nconst TRANSITION_END = 'transitionend'\r\n\r\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\r\nconst toType = obj => {\r\n  if (obj === null || obj === undefined) {\r\n    return `${obj}`\r\n  }\r\n\r\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\r\n}\r\n\r\n/**\r\n * --------------------------------------------------------------------------\r\n * Public Util Api\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\nconst getUID = prefix => {\r\n  do {\r\n    prefix += Math.floor(Math.random() * MAX_UID)\r\n  } while (document.getElementById(prefix))\r\n\r\n  return prefix\r\n}\r\n\r\nconst getSelector = element => {\r\n  let selector = element.getAttribute('data-target')\r\n\r\n  if (!selector || selector === '#') {\r\n    const hrefAttr = element.getAttribute('href')\r\n\r\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\r\n  }\r\n\r\n  return selector\r\n}\r\n\r\nconst getSelectorFromElement = element => {\r\n  const selector = getSelector(element)\r\n\r\n  if (selector) {\r\n    return document.querySelector(selector) ? selector : null\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nconst getElementFromSelector = element => {\r\n  const selector = getSelector(element)\r\n\r\n  return selector ? document.querySelector(selector) : null\r\n}\r\n\r\nconst getTransitionDurationFromElement = element => {\r\n  if (!element) {\r\n    return 0\r\n  }\r\n\r\n  // Get transition-duration of the element\r\n  let {\r\n    transitionDuration,\r\n    transitionDelay\r\n  } = window.getComputedStyle(element)\r\n\r\n  const floatTransitionDuration = parseFloat(transitionDuration)\r\n  const floatTransitionDelay = parseFloat(transitionDelay)\r\n\r\n  // Return 0 if element or transition duration is not found\r\n  if (!floatTransitionDuration && !floatTransitionDelay) {\r\n    return 0\r\n  }\r\n\r\n  // If multiple durations are defined, take the first\r\n  transitionDuration = transitionDuration.split(',')[0]\r\n  transitionDelay = transitionDelay.split(',')[0]\r\n\r\n  return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\r\n}\r\n\r\nconst triggerTransitionEnd = element => {\r\n  element.dispatchEvent(new Event(TRANSITION_END))\r\n}\r\n\r\nconst isElement = obj => (obj[0] || obj).nodeType\r\n\r\nconst emulateTransitionEnd = (element, duration) => {\r\n  let called = false\r\n  const durationPadding = 5\r\n  const emulatedDuration = duration + durationPadding\r\n  function listener() {\r\n    called = true\r\n    element.removeEventListener(TRANSITION_END, listener)\r\n  }\r\n\r\n  element.addEventListener(TRANSITION_END, listener)\r\n  setTimeout(() => {\r\n    if (!called) {\r\n      triggerTransitionEnd(element)\r\n    }\r\n  }, emulatedDuration)\r\n}\r\n\r\nconst typeCheckConfig = (componentName, config, configTypes) => {\r\n  Object.keys(configTypes)\r\n    .forEach(property => {\r\n      const expectedTypes = configTypes[property]\r\n      const value = config[property]\r\n      const valueType = value && isElement(value) ?\r\n        'element' :\r\n        toType(value)\r\n\r\n      if (!new RegExp(expectedTypes).test(valueType)) {\r\n        throw new Error(\r\n          `${componentName.toUpperCase()}: ` +\r\n          `Option \"${property}\" provided type \"${valueType}\" ` +\r\n          `but expected type \"${expectedTypes}\".`)\r\n      }\r\n    })\r\n}\r\n\r\nconst isVisible = element => {\r\n  if (!element) {\r\n    return false\r\n  }\r\n\r\n  if (element.style && element.parentNode && element.parentNode.style) {\r\n    const elementStyle = getComputedStyle(element)\r\n    const parentNodeStyle = getComputedStyle(element.parentNode)\r\n\r\n    return elementStyle.display !== 'none' &&\r\n      parentNodeStyle.display !== 'none' &&\r\n      elementStyle.visibility !== 'hidden'\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nconst findShadowRoot = element => {\r\n  if (!document.documentElement.attachShadow) {\r\n    return null\r\n  }\r\n\r\n  // Can find the shadow root otherwise it'll return the document\r\n  if (typeof element.getRootNode === 'function') {\r\n    const root = element.getRootNode()\r\n    return root instanceof ShadowRoot ? root : null\r\n  }\r\n\r\n  if (element instanceof ShadowRoot) {\r\n    return element\r\n  }\r\n\r\n  // when we don't find a shadow root\r\n  if (!element.parentNode) {\r\n    return null\r\n  }\r\n\r\n  return findShadowRoot(element.parentNode)\r\n}\r\n\r\nconst noop = () => function () {}\r\n\r\nconst reflow = element => element.offsetHeight\r\n\r\nconst getjQuery = () => {\r\n  const { jQuery } = window\r\n\r\n  if (jQuery && !document.body.hasAttribute('data-no-jquery')) {\r\n    return jQuery\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nexport {\r\n  getjQuery,\r\n  TRANSITION_END,\r\n  getUID,\r\n  getSelectorFromElement,\r\n  getElementFromSelector,\r\n  getTransitionDurationFromElement,\r\n  triggerTransitionEnd,\r\n  isElement,\r\n  emulateTransitionEnd,\r\n  typeCheckConfig,\r\n  isVisible,\r\n  findShadowRoot,\r\n  noop,\r\n  reflow\r\n}\r\n","/**\r\n * --------------------------------------------------------------------------\r\n * CoreUI (v3.2.0): class-toggler.js\r\n * Licensed under MIT (https://coreui.io/license)\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\nimport {\r\n  getjQuery\r\n} from './util/index'\r\nimport Data from './dom/data'\r\nimport EventHandler from './dom/event-handler'\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * Constants\r\n * ------------------------------------------------------------------------\r\n */\r\n\r\nconst NAME = 'class-toggler'\r\nconst VERSION = '3.2.0'\r\nconst DATA_KEY = 'coreui.class-toggler'\r\nconst EVENT_KEY = `.${DATA_KEY}`\r\nconst DATA_API_KEY = '.data-api'\r\n\r\nconst Default = {\r\n  breakpoints: '-sm,-md,-lg,-xl',\r\n  postfix: '-show',\r\n  responsive: false,\r\n  target: 'body'\r\n}\r\n\r\nconst CLASS_NAME_CLASS_TOGGLER = 'c-class-toggler'\r\n\r\nconst EVENT_CLASS_TOGGLE = 'classtoggle'\r\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\r\n\r\nconst SELECTOR_CLASS_TOGGLER = '.c-class-toggler'\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * Class Definition\r\n * ------------------------------------------------------------------------\r\n */\r\n\r\nclass ClassToggler {\r\n  constructor(element) {\r\n    this._element = element\r\n  }\r\n\r\n  // Getters\r\n\r\n  static get VERSION() {\r\n    return VERSION\r\n  }\r\n\r\n  // Public\r\n  toggle() {\r\n    this._getElementDataAttributes(this._element).forEach(dataAttributes => {\r\n      let element\r\n      const { target, toggle } = dataAttributes\r\n      if (target === '_parent' || target === 'parent') {\r\n        element = this._element.parentNode\r\n      } else {\r\n        element = document.querySelector(target)\r\n      }\r\n\r\n      toggle.forEach(object => {\r\n        const { className, responsive, postfix } = object\r\n        const breakpoints = (typeof object.breakpoints === 'undefined' || object.breakpoints === null) ? null : this._arrayFromString(object.breakpoints)\r\n\r\n        // eslint-disable-next-line no-negated-condition\r\n        if (!responsive) {\r\n          const add = element.classList.toggle(className)\r\n          const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\r\n            detail: {\r\n              target,\r\n              add,\r\n              className\r\n            }\r\n          })\r\n          element.dispatchEvent(event)\r\n        } else {\r\n          let currentBreakpoint\r\n          breakpoints.forEach(breakpoint => {\r\n            if (className.includes(breakpoint)) {\r\n              currentBreakpoint = breakpoint\r\n            }\r\n          })\r\n          const responsiveClassNames = []\r\n          if (typeof currentBreakpoint === 'undefined') {\r\n            responsiveClassNames.push(className)\r\n          } else {\r\n            responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, postfix))\r\n            breakpoints.splice(0, breakpoints.indexOf(currentBreakpoint) + 1).forEach(breakpoint => {\r\n              responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, `${breakpoint}${postfix}`))\r\n            })\r\n          }\r\n\r\n          let addResponsiveClasses = false\r\n          responsiveClassNames.forEach(responsiveClassName => {\r\n            if (element.classList.contains(responsiveClassName)) {\r\n              addResponsiveClasses = true\r\n            }\r\n          })\r\n\r\n          if (addResponsiveClasses) {\r\n            responsiveClassNames.forEach(responsiveClassName => {\r\n              element.classList.remove(responsiveClassName)\r\n              const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\r\n                detail: {\r\n                  target,\r\n                  add: false,\r\n                  className: responsiveClassName\r\n                }\r\n              })\r\n              element.dispatchEvent(event)\r\n            })\r\n          } else {\r\n            element.classList.add(className)\r\n            const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\r\n              detail: {\r\n                target,\r\n                add: true,\r\n                className\r\n              }\r\n            })\r\n            element.dispatchEvent(event)\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _arrayFromString(string) {\r\n    return string.replace(/ /g, '').split(',')\r\n  }\r\n\r\n  _isArray(array) {\r\n    try {\r\n      JSON.parse(array.replace(/'/g, '\"'))\r\n      return true\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n\r\n  _convertToArray(array) {\r\n    return JSON.parse(array.replace(/'/g, '\"'))\r\n  }\r\n\r\n  _getDataAttributes(data, attribute) {\r\n    const dataAttribute = data[attribute]\r\n    return this._isArray(dataAttribute) ? this._convertToArray(dataAttribute) : dataAttribute\r\n  }\r\n\r\n  _getToggleDetails(classNames, responsive, breakpoints, postfix) {\r\n    class ToggleDetails {\r\n      // eslint-disable-next-line default-param-last\r\n      constructor(className, responsive = Default.responsive, breakpoints, postfix) {\r\n        this.className = className\r\n        this.responsive = responsive\r\n        this.breakpoints = breakpoints\r\n        this.postfix = postfix\r\n      }\r\n    }\r\n\r\n    const toggle = []\r\n\r\n    if (Array.isArray(classNames)) {\r\n      classNames.forEach((className, index) => {\r\n        responsive = Array.isArray(responsive) ? responsive[index] : responsive\r\n        breakpoints = responsive ? (Array.isArray(breakpoints) ? breakpoints[index] : breakpoints) : null\r\n        postfix = responsive ? (Array.isArray(postfix) ? postfix[index] : postfix) : null\r\n        toggle.push(new ToggleDetails(className, responsive, breakpoints, postfix))\r\n      })\r\n    } else {\r\n      breakpoints = responsive ? breakpoints : null\r\n      postfix = responsive ? postfix : null\r\n      toggle.push(new ToggleDetails(classNames, responsive, breakpoints, postfix))\r\n    }\r\n\r\n    return toggle\r\n  }\r\n\r\n  _ifArray(array, index) {\r\n    return Array.isArray(array) ? array[index] : array\r\n  }\r\n\r\n  _getElementDataAttributes(element) {\r\n    const data = element.dataset\r\n    const targets = (typeof data.target === 'undefined') ? Default.target : this._getDataAttributes(data, 'target')\r\n    const classNames = (typeof data.class === 'undefined') ? 'undefined' : this._getDataAttributes(data, 'class')\r\n    const responsive = (typeof data.responsive === 'undefined') ? Default.responsive : this._getDataAttributes(data, 'responsive')\r\n    const breakpoints = (typeof data.breakpoints === 'undefined') ? Default.breakpoints : this._getDataAttributes(data, 'breakpoints')\r\n    const postfix = (typeof data.postfix === 'undefined') ? Default.postfix : this._getDataAttributes(data, 'postfix')\r\n\r\n    const toggle = []\r\n\r\n    class TargetDetails {\r\n      constructor(target, toggle) {\r\n        this.target = target\r\n        this.toggle = toggle\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(targets)) {\r\n      targets.forEach((target, index) => {\r\n        toggle.push(new TargetDetails(target, this._getToggleDetails(this._ifArray(classNames, index), this._ifArray(responsive, index), this._ifArray(breakpoints, index), this._ifArray(postfix, index))))\r\n      })\r\n    } else {\r\n      toggle.push(new TargetDetails(targets, this._getToggleDetails(classNames, responsive, breakpoints, postfix)))\r\n    }\r\n\r\n    return toggle\r\n  }\r\n\r\n  // Static\r\n\r\n  static _classTogglerInterface(element, config) {\r\n    let data = Data.getData(element, DATA_KEY)\r\n    const _config = typeof config === 'object' && config\r\n\r\n    if (!data) {\r\n      data = new ClassToggler(element, _config)\r\n    }\r\n\r\n    if (typeof config === 'string') {\r\n      if (typeof data[config] === 'undefined') {\r\n        throw new TypeError(`No method named \"${config}\"`)\r\n      }\r\n\r\n      data[config]()\r\n    }\r\n  }\r\n\r\n  static jQueryInterface(config) {\r\n    return this.each(function () {\r\n      ClassToggler._classTogglerInterface(this, config)\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * Data Api implementation\r\n * ------------------------------------------------------------------------\r\n */\r\n\r\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_CLASS_TOGGLER, event => {\r\n  event.preventDefault()\r\n  let toggler = event.target\r\n  if (!toggler.classList.contains(CLASS_NAME_CLASS_TOGGLER)) {\r\n    toggler = toggler.closest(SELECTOR_CLASS_TOGGLER)\r\n  }\r\n\r\n  ClassToggler._classTogglerInterface(toggler, 'toggle')\r\n})\r\n\r\nconst $ = getjQuery()\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * jQuery\r\n * ------------------------------------------------------------------------\r\n * add .c-class-toggler to jQuery only if jQuery is present\r\n */\r\n\r\nif ($) {\r\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n  $.fn[NAME] = ClassToggler.jQueryInterface\r\n  $.fn[NAME].Constructor = ClassToggler\r\n  $.fn[NAME].noConflict = () => {\r\n    $.fn[NAME] = JQUERY_NO_CONFLICT\r\n    return ClassToggler.jQueryInterface\r\n  }\r\n}\r\n\r\nexport default ClassToggler\r\n"],"names":["getjQuery","window","jQuery","document","body","hasAttribute","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","breakpoints","postfix","responsive","target","CLASS_NAME_CLASS_TOGGLER","EVENT_CLASS_TOGGLE","EVENT_CLICK_DATA_API","SELECTOR_CLASS_TOGGLER","ClassToggler","element","_element","toggle","_getElementDataAttributes","forEach","dataAttributes","parentNode","querySelector","object","className","_arrayFromString","add","classList","event","CustomEvent","detail","dispatchEvent","currentBreakpoint","breakpoint","includes","responsiveClassNames","push","replace","splice","indexOf","addResponsiveClasses","responsiveClassName","contains","remove","string","split","_isArray","array","JSON","parse","_convertToArray","_getDataAttributes","data","attribute","dataAttribute","_getToggleDetails","classNames","ToggleDetails","Array","isArray","index","_ifArray","dataset","targets","class","TargetDetails","_classTogglerInterface","config","Data","getData","_config","TypeError","jQueryInterface","each","EventHandler","on","preventDefault","toggler","closest","$","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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"}